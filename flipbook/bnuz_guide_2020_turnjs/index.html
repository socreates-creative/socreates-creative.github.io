<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!-->
<html lang="zh">
<!--<![endif]-->

<head>
  <meta charset="UTF-8">
  <title>2020 æ–°ç”Ÿå®å…¸ - åŒ—äº¬å¸ˆèŒƒå¤§å­¦ç æµ·æ ¡åŒº</title>
  <!-- <meta name="viewport" content="width = 1050, user-scalable = no" /> -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/1.7/jquery.min.js"></script>
  <!-- <script type="text/javascript" src="extras/modernizr.2.5.3.min.js"></script> -->
  <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/modernizr/2.5.3/modernizr.min.js"></script>
  <script type="text/javascript" src="lib/hash.js"></script>
  <script type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.2/vue.min.js"></script>
  <!-- <script src="lib/vue.min.js"></script> -->
  <!-- <script src="lib/antd.min.js"></script> -->
  <script src="https://cdn.bootcdn.net/ajax/libs/ant-design-vue/1.6.5/antd.min.js"></script>
  <link rel="shortcut icon" href="favicon.ico" />
  <!-- <link href="https://cdn.bootcdn.net/ajax/libs/ant-design-vue/1.6.5/antd.min.css" rel="stylesheet"> -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"> -->
</head>

<body>
  <div class="bookbox" id="canvas">

    <div class="magazine-viewport" style="width:400px;height: 600px;">
      <div class="container">
        <div class="magazine">
        </div>
      </div>
    </div>


    <!-- toolbar -->
    <!-- <div class="toolbar">
      <button type="button" class="btn btn-outline-primary btn-sm space" id="">å°é¢</button>
      <button type="button" class="btn btn-outline-primary btn-sm space" id="flipPrevious">ä¸Šä¸€é¡µ</button>
      <button type="button" class="btn btn-outline-primary btn-sm space" id="flipNext">ä¸‹ä¸€é¡µ</button>
    </div> -->

    <div id="app" class="toolbar">

      <a-space>
        <a-button shape="round" @click="toPreviousPage" icon="left"></a-button>
        <!-- ç›®å½• -->
        <a-button @click="showDrawer" shape="round" icon="menu">
        </a-button>
        <!-- <a-input id="inputNumber" v-model="curPageText" :min="0" :max="68"
          style="width: 80px;text-align:center;border-radius:90px" @change="onInputNumberChange"
          @pressEnter="onInputNumberEnter"></a-input> -->
        <a-button shape="round" icon="question" @click="guideSwitch"></a-button>
        <a-button shape="round" @click="toNextPage" icon="right"></a-button>
      </a-space>

      <!-- ä½¿ç”¨è¯´æ˜ -->
      <a-modal v-model="guideVisible" title="å¦‚ä½•ä½¿ç”¨" centered @ok="guideSwitch">
        <p>ğŸ“˜ åœ¨ä¹¦æœ¬è¾¹ç¼˜æ»‘åŠ¨æˆ–ç‚¹å‡»æŒ‰é’®åˆ‡æ¢é¡µé¢</p>
        <p>ğŸ” åŒå‡»å¯æ”¾å¤§ä¸ç¼©å°</p>
        <p>
          ğŸ”– ç‚¹å‡»
          <a-icon type="menu"></a-icon> æ‰“å¼€ç›®å½•
        </p>
        <p>ğŸ’™ ç¥æ‚¨é˜…è¯»æ„‰å¿« :)</p>
      </a-modal>


      <!-- ç›®å½• -->
      <a-drawer title="ç›®å½•" mask="true" placement="left" :closable="true" :visible="drawerVisible" @close="showDrawer">
        <div style="margin:-20px">
          <a-menu :default-selected-keys="['0']" :default-open-keys="['sub1']" mode="inline" theme="light"
            :inline-collapsed="collapsed">
            <a-menu-item key="-1" @click="gotoPage(1)">å°é¢</a-menu-item>
            <a-menu-item key="1" @click="gotoPage(3)">å°æ¼«ç”»</a-menu-item>
            <a-menu-item key="3" @click="gotoPage(5)">ç›®å½•</a-menu-item>

            <!-- ç¬¬ä¸€ç«  -->
            <a-sub-menu key="c1">
              <span slot="title">å¸ˆå¤§å°è±¡</span>

              <a-menu-item-group key="g1">
                <template slot="title">
                  <span>å­¦æ ¡ä»‹ç»</span>
                </template>
                <a-menu-item key="6-1" @click="gotoPage(8)">å¸ˆå¤§æ¦‚å†µ</a-menu-item>
                <a-menu-item key="6-2" @click="gotoPage(8)">å¸ˆå¤§å†å²</a-menu-item>
                <a-menu-item key="6-3" @click="gotoPage(8)">ç æµ·æ ¡åŒº</a-menu-item>
              </a-menu-item-group>

              <a-menu-item-group key="g2">
                <template slot="title">
                  <span>æ ¡å›­é£æ™¯</span>
                </template>
                <a-menu-item key="7-1" @click="gotoPage(9)">å­¦æ ¡å¹³é¢å›¾</a-menu-item>
                <a-menu-item key="7-2" @click="gotoPage(9)">éƒ¨åˆ†æ ‡å¿—æ€§æ™¯è§‚</a-menu-item>
              </a-menu-item-group>

              <a-menu-item-group key="g3">
                <template slot="title">
                  <span>å­¦ç”Ÿç»„ç»‡</span>
                </template>
                <a-menu-item key="13" @click="gotoPage(16)">å­¦ç”Ÿç»„ç»‡</a-menu-item>
              </a-menu-item-group>
            </a-sub-menu>

            <!-- ç¬¬äºŒç«  -->
            <a-sub-menu key="c2">
              <span slot="title">å¸ˆå¤§æ”»ç•¥</span>
              <a-menu-item key="16" @click="gotoPage(18)">å­¦ä¹ ç¯‡</a-menu-item>
              <a-menu-item key="34" @click="gotoPage(36)">ç”Ÿæ´»ç¯‡</a-menu-item>
            </a-sub-menu>

            <!-- ç¬¬ä¸‰ç«  -->
            <a-sub-menu key="c3" title="å¸ˆå¤§ç»éªŒ">
              <a-menu-item key="48-1" @click="gotoPage(50)">
                <span class="bold">è¯é¢˜ä¸€ |</span> åœ¨å—å›½åŒ—å¸ˆç”Ÿæ´»æ˜¯ä¸€ç§æ€æ ·çš„ä½“éªŒï¼Ÿ
              </a-menu-item>
              <a-menu-item key="48-2" @click="gotoPage(50)">
                <span class="bold">è¯é¢˜äºŒ |</span>ä¸“ä¸šå‘å±•ï¼Œå¸ˆå…„å¸ˆå§æœ‰å¦™æ‹›
              </a-menu-item>
              <a-menu-item key="53" @click="gotoPage(55)">
                <span class="bold">è¯é¢˜ä¸‰ |</span> ä¸€æœˆå†›è®­ï¼Ÿæ”»ç•¥åœ¨æ­¤
              </a-menu-item>
              <a-menu-item key="55-1" @click="gotoPage(57)">
                <span class="bold">è¯é¢˜å›› |</span> åœ¨å­¦æ ¡çš„ä¸€äº›ç”Ÿæ´»å°æŠ€å·§
              </a-menu-item>
              <a-menu-item key="55-2" @click="gotoPage(57)">
                <span class="bold">è¯é¢˜äº” |</span> è½¬æˆ·å£ã€æ¸¯æ¾³é€šè¡Œè¯å’Œå­¦ç”Ÿè¯çš„é‚£äº›äº‹å„¿
              </a-menu-item>
              <a-menu-item key="58" @click="gotoPage(60)">
                <span class="bold">è¯é¢˜å…­ |</span> ç æµ·é‚£ä¹ˆå¤§ï¼Œæˆ‘æƒ³å»çœ‹çœ‹
              </a-menu-item>
              <a-menu-item key="60" @click="gotoPage(62)">
                <span class="bold">è¯é¢˜ä¸ƒ |</span> æˆ‘å¸Œæœ›ï¼Œå¤§å­¦ç”Ÿæ´»é‡Œä¸åªæœ‰å­¦ä¹ 
              </a-menu-item>
              <a-menu-item key="64" @click="gotoPage(66)">
                <span class="bold">è¯é¢˜å…« |</span> ç¬¬ä¸€æ¬¡å½“å¤§å­¦ç”Ÿï¼å¸ˆå…„å¸ˆå§å¸¦å¸¦æˆ‘
              </a-menu-item>
            </a-sub-menu>
            <!-- å°åº• -->
            <a-menu-item key="66" @click="gotoPage(69)">å°åº•</a-menu-item>
          </a-menu>
        </div>
      </a-drawer>

      <div class="credit unselectable">
        <a href="https://zhuhai.bnu.edu.cn/" style="text-decoration-line: underline; color: grey;">ğŸ’™ åŒ—äº¬å¸ˆèŒƒå¤§å­¦ç æµ·æ ¡åŒº</a> |
        Â© 2020
        <a href="https://socreates.cn" style="text-decoration-line: underline; color: grey;">æ³èŸæ–‡åŒ–å·¥ä½œå®¤</a>
      </div>
    </div>
</body>

<script type="text/javascript">

  function loadApp() {
    var ratio = 1103 / 1655
    var w = $(window).width();
    var h = $(window).height();
    $('.flipboox').width(w).height(h);
    $(window).resize(function () {
      w = $(window).width();
      h = $(window).height();
      $('.flipboox').width(w).height(h);
    });

    $('#canvas').fadeIn(500);

    var flipbook = $('.magazine');

    // Check if the CSS was already loaded
    if (flipbook.width() == 0 || flipbook.height() == 0) {
      setTimeout(loadApp, 10);
      return;
    }

    // Create the flipbook
    flipbook.turn({
      // Magazine width
      width: h * 0.9 * ratio,
      // Magazine height
      height: h * 0.9,
      // Duration in millisecond
      duration: 500,
      display: 'single',
      // Hardware acceleration
      acceleration: !isChrome(),
      // Enables gradients
      gradients: true,
      // Auto center this flipbook
      autoCenter: true,
      // Elevation from the edge of the flipbook when turning a page
      elevation: 50,
      // The number of pages
      pages: 69,
      // Events
      when: {
        turning: function (event, page, view) {
          var book = $(this),
            currentPage = book.turn('page'),
            pages = book.turn('pages');

          // Update the current URI
          Hash.go('page/' + page).update();

          // Show and hide navigation buttons
          disableControls(page);
          $('.thumbnails .page-' + currentPage).
            parent().
            removeClass('current');

          $('.thumbnails .page-' + page).
            parent().
            addClass('current');

        },

        turned: function (event, page, view) {
          disableControls(page);
          $(this).turn('center');
          if (page == 1) {
            $(this).turn('peel', 'br');
          }

        },

        missing: function (event, pages) {
          // Add pages that aren't in the magazine
          for (var i = 0; i < pages.length; i++)
            addPage(pages[i], $(this));
        }
      }

    });

    // Zoom.js
    $('.magazine-viewport').zoom({
      flipbook: $('.magazine'),
      max: function () {
        return 2;
      },

      when: {
        swipeLeft: function () {
          $(this).zoom('flipbook').turn('next');
        },

        swipeRight: function () {
          $(this).zoom('flipbook').turn('previous');
        },

        resize: function (event, scale, page, pageElement) {

          if (scale == 1)
            loadSmallPage(page, pageElement);
          else
            loadLargePage(page, pageElement);

        },

        zoomIn: function () {

          $('.thumbnails').hide();
          $('.made').hide();
          $('.magazine').removeClass('animated').addClass('zoom-in');
          $('.zoom-icon').removeClass('zoom-icon-in').addClass('zoom-icon-out');

          if (!window.escTip && !$.isTouch) {
            escTip = true;

            $('<div />', { 'class': 'exit-message' }).
              html('<div>Press ESC to exit</div>').
              appendTo($('body')).
              delay(2000).
              animate({ opacity: 0 }, 500, function () {
                $(this).remove();
              });
          }
        },

        zoomOut: function () {
          $('.exit-message').hide();
          $('.thumbnails').fadeIn();
          $('.made').fadeIn();
          $('.zoom-icon').removeClass('zoom-icon-out').addClass('zoom-icon-in');
          setTimeout(function () {
            $('.magazine').addClass('animated').removeClass('zoom-in');
            resizeViewport();
          }, 0);

        }
      }
    });

    // Zoom event
    if ($.isTouch)
      $('.magazine-viewport').bind('zoom.doubleTap', zoomTo);
    else
      $('.magazine-viewport').bind('zoom.tap', zoomTo);


    // Using arrow keys to turn the page
    $(document).keydown(function (e) {
      var previous = 37, next = 39, esc = 27;
      switch (e.keyCode) {
        case previous:
          // left arrow
          $('.magazine').turn('previous');
          e.preventDefault();
          break;
        case next:
          //right arrow
          $('.magazine').turn('next');
          e.preventDefault();
          break;
        case esc:

          $('.magazine-viewport').zoom('zoomOut');
          e.preventDefault();
          break;
      }
    });

    // URIs - Format #/page/1 
    Hash.on('^page\/([0-9]*)$', {
      yep: function (path, parts) {
        var page = parts[1];
        if (page !== undefined) {
          if ($('.magazine').turn('is'))
            $('.magazine').turn('page', page);
        }

      },
      nop: function (path) {
        if ($('.magazine').turn('is'))
          $('.magazine').turn('page', 1);
      }
    });


    $(window).resize(function () {
      resizeViewport();
    }).bind('orientationchange', function () {
      resizeViewport();
    });


    // Regions
    if ($.isTouch) {
      $('.magazine').bind('touchstart', regionClick);
    } else {
      $('.magazine').click(regionClick);
    }

    resizeViewport();
    $('.magazine').addClass('animated');
  }

  // Zoom icon

  $('.zoom-icon').bind('mouseover', function () {

    if ($(this).hasClass('zoom-icon-in'))
      $(this).addClass('zoom-icon-in-hover');

    if ($(this).hasClass('zoom-icon-out'))
      $(this).addClass('zoom-icon-out-hover');

  }).bind('mouseout', function () {

    if ($(this).hasClass('zoom-icon-in'))
      $(this).removeClass('zoom-icon-in-hover');

    if ($(this).hasClass('zoom-icon-out'))
      $(this).removeClass('zoom-icon-out-hover');

  }).bind('click', function () {

    if ($(this).hasClass('zoom-icon-in'))
      $('.magazine-viewport').zoom('zoomIn');
    else if ($(this).hasClass('zoom-icon-out'))
      $('.magazine-viewport').zoom('zoomOut');

  });

  $('#canvas').hide();


  // Load the HTML4 version if there's not CSS transform
  yepnope({
    test: Modernizr.csstransforms,
    yep: ['lib/turn.min.js'],
    nope: ['lib/turn.html4.min.js'],
    both: ['lib/zoom.min.js', 'js/magazine.js', 'css/magazine.css'],
    complete: loadApp
  });

  // new Vue app
  var vm = new Vue({
    el: "#app",
    data: {
      guideVisible: false,
      collapsed: false,
      drawerVisible: true,
    },

    methods: {
      guideSwitch() {
        console.log("pressed guideSwitch");
        this.guideVisible = !this.guideVisible
      },

      greet(str, e) {
        alert(str);
        console.log(e);
      },

      toNextPage() {
        $('.magazine').turn('next');
      },

      toPreviousPage() {
        $('.magazine').turn('previous');
      },

      showDrawer() {
        this.drawerVisible = !this.drawerVisible
      },

      // è·³è½¬åˆ°æŒ‡å®šé¡µé¢
      gotoPage(num) {
        $('.magazine').turn('page', num)
        this.drawerVisible = !this.drawerVisible
      },

    }
  });
</script>

<style>
  .magazine {
    /* margin: 0px; */
  }
</style>

</html>